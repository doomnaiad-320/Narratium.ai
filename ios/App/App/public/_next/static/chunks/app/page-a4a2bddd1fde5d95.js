(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{24544:(t,e,o)=>{"use strict";o.d(e,{M:()=>l});var n=o(12115),i=o(6829);let a="narratium_tour_completed",r="narratium_character_tour_completed";function l(){let[t,e]=(0,n.useState)(!1),[o,l]=(0,n.useState)([]),{t:s,language:c}=(0,i.ok)();(0,n.useEffect)(()=>{localStorage.getItem(a)||setTimeout(()=>{d()},2e3)},[]),(0,n.useEffect)(()=>{if(t){let t=o.length>0&&"body"===o[0].target;t?d():t||g()}},[c]);let d=()=>{l([{target:"body",title:"选择语言 | Choose Your Language",content:"请选择您偏好的语言 | Please select your preferred language",position:"bottom",allowSkip:!1,isLanguageSelection:!0},{target:"body",title:s("tour.welcome"),content:s("tour.welcomeDescription"),position:"bottom"},{target:"[data-tour='login-button']",title:s("tour.loginTitle"),content:s("tour.loginDescription"),position:"top"},{target:"[data-tour='settings-button']",title:s("tour.settingsTitle"),content:s("tour.settingsDescription"),position:"bottom"}]),e(!0)},g=()=>{!localStorage.getItem(r)&&(l([{target:"[data-tour='worldbook-button']",title:s("tour.worldbookTitle"),content:s("tour.worldbookDescription"),position:"bottom"},{target:"[data-tour='regex-button']",title:s("tour.regexTitle"),content:s("tour.regexDescription"),position:"bottom"},{target:"[data-tour='preset-button']",title:s("tour.presetTitle"),content:s("tour.presetDescription"),position:"bottom"},{target:"[data-tour='chat-input']",title:s("tour.chatTitle"),content:s("tour.chatDescription"),position:"top"}]),e(!0))};return{isTourVisible:t,currentTourSteps:o,startHomeTour:d,startCharacterTour:g,completeTour:()=>{e(!1),o.length>0&&"body"===o[0].target&&localStorage.setItem(a,"true")},skipTour:()=>{e(!1),o.length>0&&"body"===o[0].target&&localStorage.setItem(a,"true")},resetTour:()=>{localStorage.removeItem(a),localStorage.removeItem(r),e(!1)}}}},41877:(t,e,o)=>{"use strict";o.d(e,{default:()=>g});var n=o(95155),i=o(12115),a=o(76408),r=o(6874),l=o.n(r),s=o(6829),c=o(48440),d=o(24544);function g(){let{t,fontClass:e,serifFontClass:o}=(0,s.ok)(),[r,g]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),{isTourVisible:p,currentTourSteps:m,completeTour:x,skipTour:b}=(0,d.M)();return((0,i.useEffect)(()=>{g(!0);let t=new Image,e=new Image;t.src="/background_yellow.png",e.src="/background_red.png",Promise.all([new Promise(e=>t.onload=e),new Promise(t=>e.onload=t)]).then(()=>{h(!0)})},[]),r)?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full login-fantasy-bg relative",children:[(0,n.jsx)("div",{className:"absolute inset-0 z-0 opacity-35 transition-opacity duration-500 ".concat(u?"opacity-35":"opacity-0"),style:{backgroundImage:"url('/background_yellow.png')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),(0,n.jsx)("div",{className:"absolute inset-0 z-1 opacity-45 transition-opacity duration-500 ".concat(u?"opacity-45":"opacity-0"),style:{backgroundImage:"url('/background_red.png')",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",mixBlendMode:"multiply"}}),(0,n.jsxs)("div",{className:"absolute inset-0 pointer-events-none z-10",children:[(0,n.jsx)("div",{className:"absolute top-10 left-10 opacity-5",children:(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M12 2L15 8H21L16 12L18 18L12 14L6 18L8 12L3 8H9L12 2Z",fill:"#f9c86d"})})}),(0,n.jsx)("div",{className:"absolute top-20 right-20 opacity-5",children:(0,n.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M10 0L12 6H18L13 10L15 16L10 12L5 16L7 10L2 6H8L10 0Z",fill:"#f9c86d"})})}),(0,n.jsx)("div",{className:"absolute bottom-20 left-1/4 opacity-5",children:(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 2C11.3 2 14 4.7 14 8C14 11.3 11.3 14 8 14C4.7 14 2 11.3 2 8C2 4.7 4.7 2 8 2Z",fill:"#85c5e3"})})}),(0,n.jsx)("div",{className:"absolute bottom-10 right-1/4 opacity-5",children:(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M12 0C5.4 0 0 5.4 0 12C0 18.6 5.4 24 12 24C18.6 24 24 18.6 24 12C24 5.4 18.6 0 12 0ZM12 4C16.4 4 20 7.6 20 12C20 16.4 16.4 20 12 20C7.6 20 4 16.4 4 12C4 7.6 7.6 4 12 4Z",fill:"#a18d6f"})})})]}),(0,n.jsxs)(a.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"text-center max-w-2xl px-4 relative z-20",children:[(0,n.jsx)("h1",{className:"text-5xl font-cinzel mb-6 bg-clip-text text-transparent bg-gradient-to-r from-amber-500 via-orange-400 to-yellow-300 drop-shadow-[0_0_10px_rgba(251,146,60,0.5)]",children:"Narratium"}),(0,n.jsx)("p",{className:"text-xl mb-12 tracking-wide ".concat(o),style:{background:"linear-gradient(to right, #82652EFF, #DCAA22FF, #D80909FF)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",color:"transparent",textShadow:"0 0 2px rgba(209, 163, 92, 0.3)"},children:t("homePage.slogan")}),(0,n.jsx)("div",{className:"flex flex-col md:flex-row gap-4 justify-center mt-6",children:(0,n.jsx)(l(),{href:"/character-cards",children:(0,n.jsx)(a.P.div,{className:"portal-button text-[#c0a480] hover:text-[#ffd475] text-sm px-6 py-2 border border-[#534741] rounded-md cursor-pointer ".concat(e," tracking-wide shadow-inner"),whileHover:{scale:1.03,backgroundColor:"rgba(40, 35, 30, 0.6)"},transition:{type:"spring",stiffness:400,damping:15},children:t("homePage.immediatelyStart")})})})]}),(0,n.jsx)(c.A,{steps:m,isVisible:p,onComplete:x,onSkip:b})]}):null}},48440:(t,e,o)=>{"use strict";o.d(e,{A:()=>r});var n=o(95155),i=o(12115),a=o(6829);function r(t){let{steps:e,isVisible:o,onComplete:r,onSkip:l}=t,[s,c]=(0,i.useState)(0),[d,g]=(0,i.useState)(null),{t:u,serifFontClass:h,setLanguage:p,language:m}=(0,a.ok)();(0,i.useEffect)(()=>{var t;s>0&&(null===(t=e[0])||void 0===t?void 0:t.isLanguageSelection)&&c(1)},[m]);let x=(0,i.useRef)(null),b=(0,i.useRef)(null);(0,i.useEffect)(()=>(o?(b.current={x:window.scrollX,y:window.scrollY},document.body.style.overflow="hidden",document.body.style.position="relative"):(document.body.style.overflow="",document.body.style.position="",b.current&&(window.scrollTo(b.current.x,b.current.y),b.current=null)),()=>{document.body.style.overflow="",document.body.style.position=""}),[o]),(0,i.useEffect)(()=>{if(!o||s>=e.length)return;let t=()=>{let t=document.querySelector(e[s].target);if(t){let o=t.getBoundingClientRect();if(g(o),"body"!==e[s].target){let e=window.innerHeight,n=window.innerWidth,i=o.top,a=o.bottom,r=o.left,l=o.right;i>=0&&r>=0&&a<=e&&l<=n||t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}},n="body"===e[s].target?100:50,i=requestAnimationFrame(()=>{d?t():setTimeout(t,n)});return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),cancelAnimationFrame(i)}},[s,e,o]);let w=()=>{s<e.length-1?c(s+1):r()};if(!o||s>=e.length||!d)return null;let f=e[s],v=(()=>{if("body"===f.target)return{top:(window.innerHeight-200)/2,left:(window.innerWidth-320)/2};let t=d.top<.2*window.innerHeight,e=d.bottom>.8*window.innerHeight,o=d.left<.2*window.innerWidth,n=d.right>.8*window.innerWidth,i=0,a=0,r=f.position;switch(t&&"top"===f.position&&(r="bottom"),e&&"bottom"===f.position&&(r="top"),o&&"left"===f.position&&(r="right"),n&&("right"===f.position||"left"===f.position)&&(r="bottom"),r){case"top":i=d.top-200-50,a=d.left+(d.width-320)/2;break;case"bottom":i=d.bottom+50,a=d.left+(d.width-320)/2;break;case"left":i=d.top+(d.height-200)/2,a=d.left-320-50;break;case"right":i=d.top+(d.height-200)/2,a=d.right+50}return i<30&&"top"===r&&(i=d.bottom+50),i+200>window.innerHeight-30&&"bottom"===r&&(i=d.top-200-50),a<30&&"left"===r&&(a=d.right+50),a+320>window.innerWidth-30&&("right"===r&&(a=d.left-320-50),a<30&&(a=(window.innerWidth-320)/2)),{top:i=Math.max(30,Math.min(i,window.innerHeight-200-30)),left:a=Math.max(30,Math.min(a,window.innerWidth-320-30))}})();return(0,n.jsxs)("div",{className:"fixed inset-0 z-[9999] pointer-events-auto",children:[(0,n.jsx)("div",{ref:x,className:"absolute inset-0 bg-black bg-opacity-75 pointer-events-none",style:{background:"body"===f.target?"rgba(0, 0, 0, 0.75)":"\n              radial-gradient(\n                circle at ".concat(d.left+d.width/2,"px ").concat(d.top+d.height/2,"px,\n                transparent ").concat(Math.max(d.width,d.height)/2+10,"px,\n                rgba(0, 0, 0, 0.8) ").concat(Math.max(d.width,d.height)/2+20,"px\n              )\n            ")}}),"body"!==f.target&&(0,n.jsx)("div",{className:"absolute border-2 border-[#f9c86d] rounded-lg shadow-lg pointer-events-none",style:{top:d.top-4,left:d.left-4,width:d.width+8,height:d.height+8,boxShadow:"0 0 20px rgba(249, 200, 109, 0.6)"}}),(0,n.jsxs)("div",{className:"absolute bg-[#2a261f] border border-[#534741] rounded-lg shadow-2xl p-6 max-w-sm pointer-events-auto transition-all duration-300 opacity-100",style:{top:v.top,left:v.left,boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1)",transform:"scale(1)",opacity:+!!d},children:[(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-[#f4e8c1] mb-2 ".concat(h),children:f.title}),(0,n.jsx)("p",{className:"text-[#c0a480] text-sm leading-relaxed ".concat(h),children:f.content})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("div",{className:"flex space-x-1",children:e.map((t,e)=>(0,n.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e===s?"bg-[#f9c86d]":e<s?"bg-[#c0a480]":"bg-[#534741]")},e))}),(0,n.jsxs)("span",{className:"text-xs text-[#a18d6f] ".concat(h),children:[s+1," / ",e.length]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{className:"flex space-x-2",children:[s>0&&(0,n.jsx)("button",{onClick:()=>{s>0&&c(s-1)},className:"px-3 py-1.5 text-sm bg-[#1a1816] text-[#c0a480] border border-[#534741] rounded hover:bg-[#252220] hover:text-[#f4e8c1] transition-colors ".concat(h),children:u("tour.previous")||"上一步"}),!1!==f.allowSkip&&(0,n.jsx)("button",{onClick:()=>{l()},className:"px-3 py-1.5 text-sm text-[#a18d6f] hover:text-[#c0a480] transition-colors ".concat(h),children:u("tour.skip")||"跳过"})]}),f.isLanguageSelection?(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("button",{onClick:()=>{p("zh"),document.documentElement.lang="zh",localStorage.setItem("language","zh"),w()},className:"px-4 py-1.5 text-sm bg-[#f9c86d] text-[#1a1816] rounded hover:bg-[#c0a480] transition-colors font-medium ".concat(h),children:"中文"}),(0,n.jsx)("button",{onClick:()=>{p("en"),document.documentElement.lang="en",localStorage.setItem("language","en"),w()},className:"px-4 py-1.5 text-sm bg-[#f9c86d] text-[#1a1816] rounded hover:bg-[#c0a480] transition-colors font-medium ".concat(h),children:"English"})]}):(0,n.jsx)("button",{onClick:w,className:"px-4 py-1.5 text-sm bg-[#f9c86d] text-[#1a1816] rounded hover:bg-[#c0a480] transition-colors font-medium ".concat(h),children:s===e.length-1?u("tour.finish")||"完成":u("tour.next")||"下一步"})]})]})]})}},58104:()=>{},89841:(t,e,o)=>{Promise.resolve().then(o.t.bind(o,58104,23)),Promise.resolve().then(o.bind(o,41877))}},t=>{var e=e=>t(t.s=e);t.O(0,[297,408,874,829,441,684,358],()=>e(89841)),_N_E=t.O()}]);